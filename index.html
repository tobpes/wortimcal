<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GFOS Helper</title>
  <link rel="icon" href="favicon/favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: url('https://www.hapag-lloyd.com/content/dam/website/images/press_and_media/photo_library/HLAG_Wallpaper_stack-containers.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #ffffff;
      padding: 2rem;
      margin: 0;
    }

    .container {
      background-color: rgba(0, 0, 0, 0.6);
      border-radius: 12px;
      padding: 2rem;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
    }

    h1 {
      text-align: center;
      margin-bottom: 0.3rem;
      font-size: 1.8rem;
    }

    h3 {
      text-align: center;
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-weight: 400;
      color: #dddddd;
    }

    label {
      margin-top: 1rem;
      font-weight: 600;
      display: block;
    }

    input[type="time"] {
      display: block;
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      margin-top: 0.3rem;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
    }

    button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background-color: #ffaa00;
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #resetBtn {
      background-color: #f44336;
    }

    #breakHint, #pauseHint {
      display: none;
      margin-top: 0.5rem;
      color: #ffdb99;
      font-size: 0.9rem;
      text-align: center;
    }

    #infoText {
      background-color: #f8f8f8;
      color: #333;
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      font-size: 1rem;
      text-align: center;
    }

    #result {
      font-size: 1.2rem;
      margin-top: 1.5rem;
      padding: 1rem;
      background: #e3ffe3;
      border: 1px solid #b2ffb2;
      color: #222;
      text-align: center;
      border-radius: 8px;
    }

    #overtime {
      font-size: 1.2rem;
      margin-top: 1.5rem;
      padding: 1rem;
      background: #ffe3e3;
      border: 1px solid #ffb2b2;
      color: #c22;
      text-align: center;
      border-radius: 8px;
    }

    hr {
      margin: 2rem 0;
      border: none;
      border-top: 1px solid #666;
    }

    footer {
      text-align: center;
      font-size: 0.85rem;
      color: #aaa;
      margin-top: 2rem;
    }

    @media (max-width: 600px) {
      .container {
        padding: 1rem;
      }

      h1 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>

<body>

<div class="container">
  <h1>GFOS Helper üïí</h1>

  <!-- Erkl√§rungstext √ºber die Nutzung des Tools -->
  <div id="infoText">
    <p><strong>Info:</strong> Gib deinen Arbeitsbeginn, die Pausenzeit und ggf. dein Arbeitsende ein, um deinen Feierabend zu berechnen. Du kannst entweder die Pausenzeit manuell eingeben oder sie automatisch berechnen lassen, indem du den Pausenbeginn und das Pausenende angibst und den "Pause berechnen" Button dr√ºckst.</p>
  </div>

  <label for="start">Arbeitsbeginn:</label>
  <input type="time" id="start">

  <label for="pause">Pausenzeit (hh:mm):</label>
  <input type="time" id="pause" step="60">

  <label for="end">Arbeitsende (optional):</label>
  <input type="time" id="end">

  <label for="breakStart">Pausenbeginn:</label>
  <input type="time" id="breakStart">

  <label for="breakEnd">Pausenende:</label>
  <input type="time" id="breakEnd">

  <button id="calcBreakBtn">Pause berechnen</button>
  <button id="resetBtn">Reset</button>
  <div id="breakHint">‚úÖ Berechnete Pause wurde √ºbernommen.</div>
  <div id="pauseHint">‚ö†Ô∏è Gesetzlich vorgeschriebene Mindestpause: 30 Minuten.</div>

  <div id="result"></div>
  <div id="overtime"></div>

  <hr>

  <footer>
    ¬© 2025 | created by peschto with support from ChatGPT
  </footer>
</div>

<script>
  const startInput = document.getElementById('start');
  const pauseInput = document.getElementById('pause');
  const endInput = document.getElementById('end');
  const breakStartInput = document.getElementById('breakStart');
  const breakEndInput = document.getElementById('breakEnd');
  const calcBreakBtn = document.getElementById('calcBreakBtn');
  const resetBtn = document.getElementById('resetBtn');
  const breakHint = document.getElementById('breakHint');
  const pauseHint = document.getElementById('pauseHint');
  const result = document.getElementById('result');
  const overtime = document.getElementById('overtime');

  const targetWorkMinutes = 7 * 60 + 36; // 7h 36min

  function updateFeierabend() {
    if (!startInput.value || !pauseInput.value) return;

    const [startH, startM] = startInput.value.split(':').map(Number);
    const [pauseH, pauseM] = pauseInput.value.split(':').map(Number);

    const startDate = new Date();
    startDate.setHours(startH, startM, 0, 0);

    let originalPauseMinutes = pauseH * 60 + pauseM;
    let pauseMinutes = Math.max(originalPauseMinutes, 30);

    // Hinweistext, wenn die Pausenzeit unter 30 Minuten liegt
    if (originalPauseMinutes < 30) {
      pauseHint.style.display = 'block';
    } else {
      pauseHint.style.display = 'none';
    }

    const totalMinutes = targetWorkMinutes + pauseMinutes;
    const feierabendDate = new Date(startDate.getTime() + totalMinutes * 60000);

    const feierabend = feierabendDate.toLocaleTimeString('de-DE', {
      hour: '2-digit',
      minute: '2-digit'
    });

    result.textContent = `Du kannst um ${feierabend} Uhr Feierabend machen. üéâ`;

    // √úberstunden-/Minusstundenberechnung
    if (endInput.value) {
      const [endH, endM] = endInput.value.split(':').map(Number);
      const endDate = new Date();
      endDate.setHours(endH, endM, 0, 0);

      const workedMinutes = (endDate - startDate) / 60000 - pauseMinutes;
      const diff = workedMinutes - targetWorkMinutes;

      if (diff > 0) {
        const overtimeHours = Math.floor(diff / 60);
        const overtimeMins = Math.round(diff % 60);
        overtime.textContent = `Du hast ${overtimeHours} Stunden und ${overtimeMins} Minuten √úberstunden gemacht.`;
      } else if (diff < 0) {
        const minusHours = Math.floor(Math.abs(diff) / 60);
        const minusMins = Math.round(Math.abs(diff) % 60);
        overtime.textContent = `Du hast ${minusHours} Stunden und ${minusMins} Minuten Minusstunden.`;
      } else {
        overtime.textContent = `Keine √úber- oder Minusstunden.`;
      }
    } else {
      overtime.textContent = '';
    }
  }

  calcBreakBtn.addEventListener('click', () => {
    if (breakStartInput.value && breakEndInput.value) {
      const [bStartH, bStartM] = breakStartInput.value.split(':').map(Number);
      const [bEndH, bEndM] = breakEndInput.value.split(':').map(Number);

      const breakStart = new Date();
      const breakEnd = new Date();
      breakStart.setHours(bStartH, bStartM, 0, 0);
      breakEnd.setHours(bEndH, bEndM, 0, 0);

      const diffMinutes = Math.round((breakEnd - breakStart) / 60000);
      const hours = Math.floor(diffMinutes / 60);
      const minutes = diffMinutes % 60;

      pauseInput.value = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;
      updateFeierabend();

      breakHint.style.display = 'block';
      setTimeout(() => breakHint.style.display = 'none', 3000);
    } else {
      alert("Bitte Pausenbeginn und -ende vollst√§ndig angeben.");
    }
  });

  resetBtn.addEventListener('click', () => {
    startInput.value = '';
    pauseInput.value = '';
    endInput.value = '';
    breakStartInput.value = '';
    breakEndInput.value = '';
    result.textContent = '';
    overtime.textContent = '';
    pauseHint.style.display = 'none';
  });

  startInput.addEventListener('input', updateFeierabend);
  pauseInput.addEventListener('input', updateFeierabend);
  endInput.addEventListener('input', updateFeierabend);
</script>

</body>
</html>
